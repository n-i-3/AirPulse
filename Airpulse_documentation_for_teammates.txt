================================================================================
                        AIRPULSE - COMPLETE HACKATHON DOCUMENTATION
                            (Hack4Delhi 2026 - Technical Guide)
================================================================================

TABLE OF CONTENTS
-----------------
1. EXECUTIVE SUMMARY
2. EXTERNAL APIS USED
3. FEATURE BREAKDOWN (Page by Page)
4. BACKEND API REFERENCE
5. DATA FLOW ARCHITECTURE
6. SECURITY & VERIFICATION
7. AI/ML COMPONENTS
8. SCALABILITY & PERFORMANCE

================================================================================
PART 1: EXECUTIVE SUMMARY
================================================================================

AirPulse is a real-time Air Quality Command Center for Delhi NCR. It combines:
- LIVE sensor data from 100+ ground stations
- AI-powered predictions for next 24 hours
- Blockchain-verified citizen pollution reports
- Source attribution (identifying where pollution comes from)

TARGET USERS: Government officials, Environmental agencies, Citizens

================================================================================
PART 2: EXTERNAL APIS USED
================================================================================

We integrate with the following third-party APIs:

┌──────────────────────────────────────────────────────────────────────────────┐
│ 1. WAQI (World Air Quality Index) API                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│ Website: https://aqicn.org/data-platform/token/                              │
│ Purpose: Real-time AQI data from ground stations                             │
│ Endpoints Used:                                                              │
│   - GET /map/bounds/?latlng={lat1},{lng1},{lat2},{lng2}&token={token}        │
│     Returns all stations within geographic bounds                            │
│   - GET /feed/{station}/?token={token}                                       │
│     Returns detailed data for a specific station                             │
│ Data Returned: AQI value, PM2.5, PM10, NO2, CO, O3, Temperature, Humidity    │
│ Rate Limit: 1000 requests/day (free tier)                                    │
│ Cost: FREE for non-commercial use                                            │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 2. OpenWeatherMap API                                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│ Website: https://openweathermap.org/api                                      │
│ Purpose: Real-time weather data for forecast model                           │
│ Endpoints Used:                                                              │
│   - GET /data/2.5/weather?lat={lat}&lon={lon}&units=metric&appid={key}       │
│     Returns current weather conditions                                       │
│ Data Returned: Temperature, Humidity, Wind Speed, Wind Direction, Pressure  │
│ Rate Limit: 60 requests/minute (free tier)                                   │
│ Cost: FREE for personal use (up to 1M calls/month)                           │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 3. Privy Authentication                                                      │
├──────────────────────────────────────────────────────────────────────────────┤
│ Website: https://privy.io                                                    │
│ Purpose: User authentication + embedded Web3 wallet                          │
│ How It Works:                                                                │
│   - User logs in with Email/Google/Phone                                     │
│   - Privy creates an embedded crypto wallet in the background                │
│   - Wallet address is used as unique user identifier                         │
│ Why We Use It:                                                               │
│   - Provides "Web2" UX (email login) with "Web3" capabilities (wallets)      │
│   - Enables future on-chain report verification                              │
│ Cost: FREE for up to 1000 users                                              │
└──────────────────────────────────────────────────────────────────────────────┘

================================================================================
PART 3: FEATURE BREAKDOWN (Page by Page)
================================================================================

┌──────────────────────────────────────────────────────────────────────────────┐
│ PAGE: OVERVIEW (/)                                                           │
├──────────────────────────────────────────────────────────────────────────────┤
│ PURPOSE: The main command center dashboard                                   │
│                                                                              │
│ FEATURE 1: Live Heatmap                                                      │
│ - Uses: Leaflet.js (map library) + React-Leaflet                             │
│ - Data Source: WAQI API via /api/aqi/bounds                                  │
│ - How: Fetches all stations in Delhi NCR bounds (28.4-28.9°N, 76.8-77.4°E)   │
│ - Rendering: Each station becomes a CircleMarker with color based on AQI     │
│   - Green: AQI 0-50 (Good)                                                   │
│   - Yellow: AQI 51-100 (Moderate)                                            │
│   - Orange: AQI 101-150 (Unhealthy for Sensitive)                            │
│   - Red: AQI 151-200 (Unhealthy)                                             │
│   - Purple: AQI 201-300 (Very Unhealthy)                                     │
│   - Maroon: AQI 300+ (Hazardous)                                             │
│                                                                              │
│ FEATURE 2: Metric Cards (AQI, Reports, Zones, Confidence)                    │
│ - Data Source: /api/dashboard/summary                                        │
│ - Each card is CLICKABLE and navigates to relevant page                      │
│   - Delhi NCR AQI → /sources                                                 │
│   - Verified Reports → /report                                               │
│   - Critical Zones → /intel                                                  │
│   - System Confidence → /forecast                                            │
│                                                                              │
│ FEATURE 3: System Intelligence Panel                                         │
│ - Data Source: Backend-generated "intelEvents" from /api/dashboard/summary   │
│ - REAL-TIME LOGIC:                                                           │
│   - If stations > 5: "Satellite Data Verified" event                         │
│   - If criticalZones > 0: "Waste Burning Detected" event                     │
│   - Else if avgAqi < 150: "Wind Clearing Pollution" event                    │
│   - Always: "New Zone Regulation" governance event                           │
│ - Updates dynamically based on live pollution data                           │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ PAGE: AI FORECAST (/forecast)                                                │
├──────────────────────────────────────────────────────────────────────────────┤
│ PURPOSE: 24-hour AQI predictions with AI analysis                            │
│                                                                              │
│ FEATURE 1: Prediction Chart                                                  │
│ - Algorithm: "Harmonic Analysis" (Sine Wave + Trend Extrapolation)           │
│ - How It Works:                                                              │
│   1. Takes current AQI as baseline                                           │
│   2. Applies daily temperature cycle (pollution spikes at night)             │
│   3. Calculates rate-of-change trend                                         │
│   4. Projects forward for 24 hours                                           │
│ - Runs ENTIRELY CLIENT-SIDE (works offline!)                                 │
│                                                                              │
│ FEATURE 2: Dynamic Confidence Score                                          │
│ - Formula: (stationCount / 50) * 100 * 0.95                                  │
│ - Meaning: More stations = higher confidence, capped at 95%                  │
│ - Updates automatically when data loads                                      │
│                                                                              │
│ FEATURE 3: Real Weather Data                                                 │
│ - Source: OpenWeatherMap API                                                 │
│ - Shows: Wind Speed (km/h), Temperature (°C), Humidity (%)                   │
│ - Progress bars are DYNAMIC based on actual values                           │
│ - Fallback: Uses defaults if API fails                                       │
│                                                                              │
│ FEATURE 4: Ward Selector                                                     │
│ - Predefined geographic bounds for:                                          │
│   - All Delhi NCR, Connaught Place, Dwarka, Rohini, Okhla, Anand Vihar       │
│ - Switching wards triggers "model retraining" animation (2s visual effect)   │
│                                                                              │
│ FEATURE 5: AI Action Plan                                                    │
│ - Rule-based recommendations:                                                │
│   - avgAqi > 200: "CRITICAL: Halt construction works"                        │
│   - avgAqi > 150: "HIGH ALERT: Activate GRAP-III protocols"                  │
│   - else: "STABLE: Continue standard monitoring"                             │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ PAGE: REPORT (/report)                                                       │
├──────────────────────────────────────────────────────────────────────────────┤
│ PURPOSE: Citizen pollution reporting with verification                       │
│                                                                              │
│ FEATURE 1: Wallet-Based Authentication                                       │
│ - Provider: Privy SDK                                                        │
│ - Flow:                                                                      │
│   1. User clicks "Connect Wallet"                                            │
│   2. Privy opens login modal (Email/Google/Phone)                            │
│   3. On success, embedded wallet is created                                  │
│   4. Wallet address becomes user identifier                                  │
│                                                                              │
│ FEATURE 2: Report Submission                                                 │
│ - Form Fields: Location, Description, Photo (optional)                       │
│ - Backend: POST /api/reports                                                 │
│ - Verification: SHA-256 hash of (userID + timestamp) stored as "proof"       │
│                                                                              │
│ FEATURE 3: ZK Proof Simulation                                               │
│ - We SIMULATE zero-knowledge verification                                    │
│ - The hash proves the report existed at a specific time                      │
│ - User identity is linked but not revealed publicly                          │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ PAGE: SOURCES (/sources)                                                     │
├──────────────────────────────────────────────────────────────────────────────┤
│ PURPOSE: Ward-wise pollution source attribution                              │
│                                                                              │
│ FEATURE 1: Ward Data Grid                                                    │
│ - Endpoint: /api/sources/wards                                               │
│ - Shows: Each ward with its AQI, dominant pollutant, source type             │
│                                                                              │
│ FEATURE 2: Source Identification Algorithm                                   │
│ - Logic runs on BACKEND (sourceController.js):                               │
│   - If NO2 > 80: Flag as "Traffic/Vehicular"                                 │
│   - If PM10 > PM2.5 * 2: Flag as "Construction Dust"                         │
│   - If PM2.5 > 200: Flag as "Biomass Burning"                                │
│   - Default: "Mixed Sources"                                                 │
│                                                                              │
│ FEATURE 3: Health Recommendations                                            │
│ - Auto-generated based on AQI level                                          │
│ - Examples: "Avoid outdoor exercise", "Use N95 masks"                        │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ PAGE: INTEL (/intel or /news)                                                │
├──────────────────────────────────────────────────────────────────────────────┤
│ PURPOSE: Automated pollution alerts and news                                 │
│                                                                              │
│ FEATURE 1: Auto-Generated Alerts                                             │
│ - Backend: Scans for stations with AQI > 300                                 │
│ - Creates alert objects with timestamp and severity                          │
│ - Pushed to frontend via API                                                 │
│                                                                              │
│ FEATURE 2: System Intelligence Events                                        │
│ - Same data as Overview page intelligence panel                              │
│ - Shows satellite verification, burning detection, etc.                      │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ PAGE: COMMUNITY (/community)                                                 │
├──────────────────────────────────────────────────────────────────────────────┤
│ PURPOSE: Social layer for citizen reports                                    │
│                                                                              │
│ FEATURE 1: Report Feed                                                       │
│ - Endpoint: GET /api/reports                                                 │
│ - Shows all submitted citizen reports                                        │
│                                                                              │
│ FEATURE 2: Voting System                                                     │
│ - Endpoints: POST /api/reports/{id}/upvote, POST /api/reports/{id}/downvote  │
│ - Community can validate or dispute reports                                  │
│                                                                              │
│ FEATURE 3: Comments                                                          │
│ - Endpoint: POST /api/reports/{id}/comments                                  │
│ - Allows discussion on each report                                           │
└──────────────────────────────────────────────────────────────────────────────┘

================================================================================
PART 4: BACKEND API REFERENCE
================================================================================

BASE URL: http://localhost:5000 (dev) | https://airpulse-server.onrender.com

┌─────────────────────────────────────────────────────────────────┐
│ ENDPOINT                          │ METHOD │ DESCRIPTION       │
├─────────────────────────────────────────────────────────────────┤
│ /api/aqi/bounds                   │ GET    │ AQI for geo bounds│
│ /api/aqi/station/:id              │ GET    │ Single station    │
│ /api/dashboard/summary            │ GET    │ Dashboard metrics │
│ /api/sources                      │ GET    │ Source analysis   │
│ /api/sources/wards                │ GET    │ Ward breakdown    │
│ /api/reports                      │ GET    │ All reports       │
│ /api/reports                      │ POST   │ Submit report     │
│ /api/reports/:id/upvote           │ POST   │ Upvote report     │
│ /api/reports/:id/downvote         │ POST   │ Downvote report   │
│ /api/reports/:id/comments         │ GET    │ Get comments      │
│ /api/reports/:id/comments         │ POST   │ Add comment       │
│ /api/auth/login                   │ POST   │ User login        │
└─────────────────────────────────────────────────────────────────┘

================================================================================
PART 5: DATA FLOW ARCHITECTURE
================================================================================

                    ┌─────────────────┐
                    │   WAQI API      │
                    │ (Ground Sensors)│
                    └────────┬────────┘
                             │ Real-time AQI
                             ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                         NODE.JS BACKEND (Express)                            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │ AQI Routes  │  │ Source Ctrl │  │ Dashboard   │  │ Intel Generator     │  │
│  │ /api/aqi/*  │  │ /api/sources│  │ /api/dash   │  │ (intelEvents logic) │  │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────────────┘  │
│                              │                                                │
│                              ▼                                                │
│                    ┌─────────────────┐                                        │
│                    │    MongoDB      │                                        │
│                    │ (Reports, Users)│                                        │
│                    └─────────────────┘                                        │
└──────────────────────────────────────────────────────────────────────────────┘
                             │ JSON API
                             ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                         NEXT.JS FRONTEND (React)                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │ Overview    │  │ Forecast    │  │ Report      │  │ Sources / Intel     │  │
│  │ (Dashboard) │  │ (AI Predict)│  │ (Submit)    │  │ (Analysis)          │  │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────────────┘  │
│                              │                                                │
│                              ▼                                                │
│                    ┌─────────────────┐                                        │
│                    │    BROWSER      │                                        │
│                    │  (User's Phone) │                                        │
│                    └─────────────────┘                                        │
└──────────────────────────────────────────────────────────────────────────────┘

================================================================================
PART 6: SECURITY & VERIFICATION
================================================================================

1. REPORT VERIFICATION
   - Each report gets a SHA-256 hash of (userID + timestamp)
   - Hash stored in MongoDB as tamper-proof fingerprint
   - Can be verified later to prove report authenticity

2. USER AUTHENTICATION
   - Privy handles all auth (no passwords stored)
   - JWT tokens for session management
   - Wallet address as unique identifier

3. API SECURITY
   - CORS configured for allowed origins
   - Environment variables for all secrets
   - No API keys exposed to frontend

================================================================================
PART 7: AI/ML COMPONENTS
================================================================================

CURRENT IMPLEMENTATION (Heuristic-Based):
- NOT a trained ML model (yet)
- Uses rule-based logic for predictions and recommendations
- Confidence score based on data quality

PREDICTION ALGORITHM (Client-Side):
1. Take current AQI value
2. Apply sine wave for daily temperature cycle
3. Add trend extrapolation based on recent changes
4. Project forward for 24 hours

FUTURE ROADMAP:
- TensorFlow.js LSTM model for time-series prediction
- Training on historical WAQI data
- Real-time model inference in browser

================================================================================
PART 8: SCALABILITY & PERFORMANCE
================================================================================

1. CACHING
   - Frontend: React Query for API response caching
   - Backend: Consider Redis for high-traffic scenarios

2. OPTIMIZATIONS
   - Removed heavy mouse-tracking animations
   - CSS animations are GPU-accelerated
   - Lazy loading for map components

3. DEPLOYMENT
   - Frontend: Vercel (auto-scaling, CDN)
   - Backend: Render (free tier, auto-sleep on inactivity)
   - Database: MongoDB Atlas (free tier, 512MB)

================================================================================
                              END OF DOCUMENTATION
================================================================================